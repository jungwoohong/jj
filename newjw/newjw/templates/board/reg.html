
{% extends "default.html" %}
{% load static i18n %}
{% block css %}
<link href="{% static 'css/handsonTable.css' %}" rel="stylesheet" class="js-stylesheet">
<style>
  .handsontable .odd {
 background: #fff 
}
.handsontable .even {
  background: #eee
}
</style>
{% endblock %}

{% block content %}

<div class="container-fluid p-0">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">공지사항 작성</h5>
        </div>
        <div class="card-body">
          <form id="frm">
            <div class="row">
              <div class="mb-3 col-md-6">
                <label class="form-label" for="inputEmail4">작성자</label>
                <input type="email" class="form-control" id="inputEmail4" placeholder="email" disabled>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label" for="title">제목</label>
              <input type="text" class="form-control" id="title" placeholder="제목을 작성해주세요">
            </div>
            <div class="mb-3">
              <label class="form-label" for="content">내용</label>
              <textarea id="content" class="form-control" rows="10" placeholder="내용을 작성해주세요"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label w-100">파일 첨부</label>
              <input type="file" id="attachFile" name="attachFile">
            </div>
            <input type="hidden" class="form-control" id="category" value="1">
          </form>
          <button id = "save" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block inline_javascript %}
<script>
  const save = document.querySelector('#save');
  var formData = $('#frm').serialize();

  save.addEventListener('click', () => {
    $.ajax({
      type : 'POST',
      contentType: 'multipart/form-data',
      url : "{% url 'postSave' %}",        
      dataType : 'json',        
      data : formData,
      processData : false,
      contentType : false,     
      cache: false,           
      timeout: 600000,  
      success : function(data) {
        alert(data.msg);
        location.href="{% url 'indexPage' %}"
      }
    });
  });
</script>
{% endblock inline_javascript %}